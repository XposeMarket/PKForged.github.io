<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - PKForged</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sekuya&display=swap" rel="stylesheet">
    <style>
        /* Use border-box globally to avoid 100vw + padding overflow issues */
        *, *::before, *::after { box-sizing: border-box; }
        body { font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background: #f7f7f7; margin: 0; padding: 0; overflow-x: hidden; position:relative; }
        /* Subtle diagonal tiled PK Forged background behind page content */
        body::before{
            content: '';
            position: fixed;
            inset: -20% -20% -20% -20%;
            background-image: url('Pkforged.jpg');
            background-repeat: repeat;
            background-size: 72px;
            opacity: 0.10;
            filter: grayscale(100%) brightness(82%);
            transform: rotate(-25deg);
            z-index: 0;
            pointer-events: none;
        }
        .container { max-width: 600px; margin: 40px auto; background: #fff; padding: 32px 24px; border-radius: 10px; box-shadow: 0 2px 12px rgba(0,0,0,0.08); position: relative; z-index: 2; }
        .dream-quote {
            font-family: 'Sekuya', 'Pacifico', cursive, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
            font-size: clamp(0.8rem, 1.6vw, 1.0rem);
            font-weight: 400;
            color: #222;
            text-align: center;
            margin: 8px auto 14px auto;
            letter-spacing: 0;
            width: 100%;
            max-width: 520px;
            padding: 0 8px;
            line-height: 1.02;
            overflow-wrap: anywhere;
            word-break: break-word;
            hyphens: auto;
            white-space: normal;
        }
        h1 { text-align: center; margin-bottom: 24px; }
        label { display: block; margin-top: 18px; font-weight: 600; }
        input, select, textarea { width: 100%; padding: 10px; margin-top: 6px; border: 1px solid #ccc; border-radius: 5px; font-size: 1rem; }
        textarea { min-height: 80px; resize: vertical; }
        .canvas-container { margin-top: 18px; text-align: center; }
        canvas { border: 1px solid #aaa; border-radius: 6px; background: #fff; cursor: crosshair; }
        .canvas-controls { margin-top: 8px; }
        button { background: #1a73e8; color: #fff; border: none; padding: 12px 24px; border-radius: 5px; font-size: 1rem; margin-top: 24px; cursor: pointer; transition: background 0.2s; }
        button:hover { background: #155ab6; }
        .optional { font-weight: 400; color: #888; font-size: 0.95em; }
        /* Header layout (match site-wide header) */
        header {
            width: 100%;
            background: #fff;
            border-bottom: 1px solid #eee;
            box-shadow: 0 2px 12px rgba(0,0,0,0.04);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 40px;
            height: 72px;
            position: relative;
            z-index: 60;
        }
        .logo { height: 48px; position: absolute; left: 24px; top: 50%; transform: translateY(-50%); }
        nav { display:flex; gap:28px; }
        nav a { text-decoration:none; color:#222; font-size:1.05rem; font-weight:600; padding:8px 0; border-bottom:2px solid transparent; transition:color .18s,border .18s }
        nav a:hover { color:#ff6600; border-bottom:2px solid #ff6600 }
        /* Mobile hamburger */
        header { overflow: visible; }
        .hamburger { display: none; position: absolute; right: 24px; top: 28%; transform: translateY(-56%); width: 44px; height: 44px; border-radius: 8px; background: rgba(0,0,0,0.06); border: 0; cursor: pointer; align-items:center; justify-content:center; z-index:70; }
        .hamburger .bar{position:relative;display:block;width:20px;height:2px;background:#666;border-radius:2px}
        .hamburger .bar::before, .hamburger .bar::after{content:'';position:absolute;left:0;width:20px;height:2px;background:#666;border-radius:2px}
        .hamburger .bar::before{top:-7px}
        .hamburger .bar::after{top:7px}
        .hamburger:focus{outline:none;box-shadow:0 0 0 3px rgba(102,102,102,0.12)}
        @media (max-width: 820px) { .hamburger{display:flex} nav{display:none} }
        /* Mobile menu overlay */
        .mobile-menu{position:fixed;inset:0;display:none;z-index:400;background:rgba(0,0,0,0.45);align-items:flex-start;justify-content:center;padding-top:72px}
        .mobile-menu.open{display:flex}
        .mobile-menu-inner{width:100%;max-width:420px;background:#fff;border-radius:0 0 12px 12px;padding:18px;box-shadow:0 20px 60px rgba(0,0,0,0.3);}
        .mobile-menu-inner nav{display:flex;flex-direction:column;gap:10px}
        .mobile-menu-inner a{display:block;padding:12px 10px;border-radius:8px;color:#222;text-decoration:none;font-weight:700}
        .mobile-menu-inner a:hover{background:#f5f5f5;color:#ff6600}
        .mobile-menu-close{position:absolute;top:14px;right:14px;background:#fff;border:0;border-radius:8px;padding:8px;cursor:pointer}
    </style>
</head>
<body>
    <header>
        <img src="PKforged.jpg" alt="PK Forged Logo" class="logo">
        <nav>
            <a href="index.html">Home</a>
            <a href="PKForged-3DDesigner.html">Wheel Designer</a>
            <a href="gallery.html">Gallery</a>
            <a href="contact.html">Contact</a>
        </nav>
        <button class="hamburger" id="hamburgerBtn" aria-label="Open menu"><span class="bar"></span></button>
    </header>
    <div class="mobile-menu" id="mobileMenu" aria-hidden="true">
        <div class="mobile-menu-inner" role="dialog" aria-modal="true">
            <button class="mobile-menu-close" id="mobileMenuClose">Close</button>
            <nav id="mobileNav"></nav>
        </div>
    </div>
    <script>
        // Mobile menu toggle: clone header nav into mobile menu
        (function(){
            const hamburger = document.getElementById('hamburgerBtn');
            const mobileMenu = document.getElementById('mobileMenu');
            const mobileNav = document.getElementById('mobileNav');
            const mobileClose = document.getElementById('mobileMenuClose');
            const headerNav = document.querySelector('header nav');
            if(headerNav && mobileNav){
                mobileNav.innerHTML = headerNav.innerHTML;
            }
            function openMenu(){ mobileMenu.classList.add('open'); mobileMenu.setAttribute('aria-hidden','false'); }
            function closeMenu(){ mobileMenu.classList.remove('open'); mobileMenu.setAttribute('aria-hidden','true'); }
            if(hamburger) hamburger.addEventListener('click', openMenu);
            if(mobileClose) mobileClose.addEventListener('click', closeMenu);
            mobileMenu.addEventListener('click', (e)=>{ if(e.target===mobileMenu) closeMenu(); });
        })();
    </script>
    <div class="container">
        <img src="PKforged.jpg" alt="PK Forged Logo" style="display:block;margin:0 auto 12px auto;max-width:120px;width:30vw;">
        <div class="dream-quote">Create your dream wheel today</div>
        <h1>Contact Us</h1>
        <form id="contactForm" method="POST" enctype="multipart/form-data" action="https://formspree.io/f/yourFormID">
            <label for="name">Name</label>
            <input type="text" id="name" name="name" required>

            <label for="phone">Phone Number</label>
            <input type="tel" id="phone" name="phone" required>

            <label for="email">Email</label>
            <input type="email" id="email" name="email" required>

            <label for="instagram">Instagram <span class="optional">(optional)</span></label>
            <input type="text" id="instagram" name="instagram" placeholder="@yourhandle">

            <label for="diameter">Wheel Diameter</label>
            <select id="diameter" name="diameter" required>
                <option value="">Select diameter</option>
                <option value="16">16 inch</option>
                <option value="17">17 inch</option>
                <option value="18">18 inch</option>
                <option value="19">19 inch</option>
                <option value="20">20 inch</option>
                <option value="21">21 inch</option>
                <option value="22">22 inch</option>
            </select>

            <label for="width">Wheel Width</label>
            <select id="width" name="width" required>
                <option value="">Select width</option>
                <option value="7.5">7.5 inch</option>
                <option value="8">8 inch</option>
                <option value="8.5">8.5 inch</option>
                <option value="9">9 inch</option>
                <option value="9.5">9.5 inch</option>
                <option value="10">10 inch</option>
                <option value="10.5">10.5 inch</option>
                <option value="11">11 inch</option>
                <option value="11.5">11.5 inch</option>
            </select>

            <label for="idea">Tell us about your design idea</label>
            <textarea id="idea" name="idea" placeholder="Describe your vision..."></textarea>

            <div class="canvas-container">
                <label>Optional: Sketch Your Design <span class="optional">(draw below)</span></label>
                <canvas id="sketchCanvas" width="320" height="200"></canvas>
                <div class="canvas-controls" style="display:flex;flex-wrap:wrap;gap:8px;justify-content:center;align-items:center;margin-top:10px;">
                                        <button type="button" id="circleShape" style="background:#fff;border:1px solid #ccc;" title="Add Circle">
                                            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#222" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="8"/></svg>
                                        </button>
                    <button type="button" id="drawMode" style="background:#1a73e8;" title="Draw">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 22l1.5-5.5L17 3.5a2.121 2.121 0 0 1 3 3L6.5 19.5z"></path><path d="M15 6l3 3"></path></svg>
                    </button>
                    <button type="button" id="eraseMode" style="background:#888;" title="Erase">
                                                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                    <rect x="6" y="15" width="12" height="5" rx="1.5" fill="#e57373" stroke="#fff"/>
                                                    <rect x="4" y="11" width="16" height="6" rx="2" transform="rotate(-20 12 14)" fill="#fff" stroke="#fff"/>
                                                    <path d="M8 19l8-8" stroke="#fff"/>
                                                </svg>
                    </button>
                    <label style="margin:0 8px;">Brush Size
                        <input type="range" id="brushSize" min="2" max="24" value="4" style="vertical-align:middle;">
                    </label>
                    <label style="margin:0 8px;">Color
                        <input type="color" id="colorPicker" value="#222222" style="vertical-align:middle;">
                    </label>
                    <button type="button" id="paintBucket" style="background:#fbbc05;color:#222;" title="Paint Bucket">
                                                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#222" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                    <path d="M19 15c.5 1.5-1 4-3 4s-3.5-2.5-3-4" fill="#fbbc05"/>
                                                    <rect x="3" y="11" width="8" height="6" rx="2" transform="rotate(-30 7 14)" fill="#fff"/>
                                                    <path d="M3 11l7.5-7.5a2 2 0 0 1 2.8 0l7.2 7.2a2 2 0 0 1 0 2.8l-7.5 7.5a2 2 0 0 1-2.8 0l-7.2-7.2a2 2 0 0 1 0-2.8z"/>
                                                    <path d="M14 7l3 3"/>
                                                </svg>
                    </button>
                    <button type="button" id="clearCanvas" style="background:#888;">Clear</button>
                </div>
            </div>

            <input type="hidden" id="sketchImage" name="sketchImage">
            <div id="formStatus" style="margin-top:16px;text-align:center;color:#1a73e8;font-weight:600;"></div>
            <button type="submit">Send Message</button>
        </form>
    </div>
    <script>
        // Enhanced Drawing Canvas Logic
        const canvas = document.getElementById('sketchCanvas');
        const ctx = canvas.getContext('2d');
        let drawing = false;
        let erasing = false;
        let lastX = 0, lastY = 0;
        let brushSize = 4;
        let brushColor = '#222222';

        // UI controls
        const drawBtn = document.getElementById('drawMode');
        const eraseBtn = document.getElementById('eraseMode');
        const brushSlider = document.getElementById('brushSize');
        const colorPicker = document.getElementById('colorPicker');
        const paintBucketBtn = document.getElementById('paintBucket');
        const circleShapeBtn = document.getElementById('circleShape');
        let placingCircle = false;
        let circle = null;

        circleShapeBtn.onclick = function() {
            // Draw a large, centered black circle
            const x = canvas.width / 2;
            const y = canvas.height / 2;
            circle = { x, y, r: 85 };
            redrawCanvasWithCircle();
            placingCircle = false;
            canvas.style.cursor = 'crosshair';
        };

        function drawCircleOnCanvas(c) {
            ctx.save();
            ctx.beginPath();
            ctx.arc(c.x, c.y, c.r, 0, 2 * Math.PI);
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 3;
            ctx.setLineDash([]);
            ctx.stroke();
            ctx.restore();
        }

        function redrawCanvasWithCircle() {
            // Save current drawing
            const img = new Image();
            img.src = canvas.toDataURL();
            img.onload = function() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.drawImage(img, 0, 0);
                if (circle) drawCircleOnCanvas(circle);
            };
        }

        let resizingCircle = false;
        let offsetX, offsetY;

        canvas.addEventListener('mousedown', function(e) {
            // No placing or moving for circle
        });

        canvas.addEventListener('mousemove', function(e) {
            // No resizing for circle
        });

        canvas.addEventListener('mouseup', function(e) {
            // No resizing for circle
        });

        // When drawing, allow drawing inside/around the circle

        function setModeDraw() {
            erasing = false;
            drawBtn.style.background = '#1a73e8';
            eraseBtn.style.background = '#888';
        }
        function setModeErase() {
            erasing = true;
            drawBtn.style.background = '#888';
            eraseBtn.style.background = '#1a73e8';
        }
        drawBtn.onclick = setModeDraw;
        eraseBtn.onclick = setModeErase;
        setModeDraw();

        brushSlider.oninput = function() {
            brushSize = parseInt(this.value, 10);
        };
        colorPicker.oninput = function() {
            brushColor = this.value;
        };

        function startDraw(e) {
            drawing = true;
            [lastX, lastY] = getXY(e);
        }
        function endDraw() { drawing = false; }
        function draw(e) {
            if (!drawing) return;
            const [x, y] = getXY(e);
            ctx.lineWidth = brushSize;
            ctx.lineCap = 'round';
            ctx.strokeStyle = erasing ? '#fff' : brushColor;
            ctx.globalCompositeOperation = erasing ? 'destination-out' : 'source-over';
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(x, y);
            ctx.stroke();
            [lastX, lastY] = [x, y];
            ctx.globalCompositeOperation = 'source-over';
        }
        function getXY(e) {
            if (e.touches) {
                const rect = canvas.getBoundingClientRect();
                return [e.touches[0].clientX - rect.left, e.touches[0].clientY - rect.top];
            } else {
                return [e.offsetX, e.offsetY];
            }
        }
        canvas.addEventListener('mousedown', startDraw);
        canvas.addEventListener('touchstart', startDraw);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('touchmove', function(e) { draw(e); e.preventDefault(); }, { passive: false });
        canvas.addEventListener('mouseup', endDraw);
        canvas.addEventListener('mouseleave', endDraw);
        canvas.addEventListener('touchend', endDraw);
        document.getElementById('clearCanvas').onclick = function() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        };

        // Paint Bucket Tool (Flood Fill)
        function hexToRgba(hex) {
            let c = hex.substring(1);
            if (c.length === 3) c = c[0]+c[0]+c[1]+c[1]+c[2]+c[2];
            const num = parseInt(c, 16);
            return [num >> 16 & 255, num >> 8 & 255, num & 255, 255];
        }
        function colorMatch(a, b) {
            return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];
        }
        function floodFill(x, y, fillColor) {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            const width = canvas.width;
            const height = canvas.height;
            const stack = [[x, y]];
            const targetColor = getPixel(data, x, y, width);
            if (colorMatch(targetColor, fillColor)) return;
            while (stack.length) {
                const [cx, cy] = stack.pop();
                const idx = (cy * width + cx) * 4;
                const currentColor = [data[idx], data[idx+1], data[idx+2], data[idx+3]];
                if (colorMatch(currentColor, targetColor)) {
                    data[idx] = fillColor[0];
                    data[idx+1] = fillColor[1];
                    data[idx+2] = fillColor[2];
                    data[idx+3] = fillColor[3];
                    if (cx > 0) stack.push([cx-1, cy]);
                    if (cx < width-1) stack.push([cx+1, cy]);
                    if (cy > 0) stack.push([cx, cy-1]);
                    if (cy < height-1) stack.push([cx, cy+1]);
                }
            }
            ctx.putImageData(imageData, 0, 0);
        }
        function getPixel(data, x, y, width) {
            const idx = (y * width + x) * 4;
            return [data[idx], data[idx+1], data[idx+2], data[idx+3]];
        }
        paintBucketBtn.onclick = function() {
            canvas.style.cursor = 'cell';
            function bucketHandler(e) {
                let [x, y] = getXY(e);
                x = Math.floor(x); y = Math.floor(y);
                floodFill(x, y, hexToRgba(brushColor));
                canvas.removeEventListener('mousedown', bucketHandler);
                canvas.removeEventListener('touchstart', bucketHandler);
                canvas.style.cursor = erasing ? 'not-allowed' : 'crosshair';
            }
            canvas.addEventListener('mousedown', bucketHandler);
            canvas.addEventListener('touchstart', bucketHandler);
        };

        // Formspree Integration (AJAX with canvas image as file)
        document.getElementById('contactForm').onsubmit = async function(e) {
            e.preventDefault();
            const form = e.target;
            const formData = new FormData(form);
            // Convert canvas to Blob and append as file
            canvas.toBlob(function(blob) {
                if (blob) {
                    formData.append('sketchFile', blob, 'sketch.png');
                }
                // Remove base64 hidden field (not needed for Formspree)
                formData.delete('sketchImage');
                // Update Formspree endpoint (replace with your real Form ID)
                fetch(form.action, {
                    method: 'POST',
                    body: formData,
                    headers: { 'Accept': 'application/json' }
                })
                .then(response => {
                    if (response.ok) {
                        document.getElementById('formStatus').textContent = 'Thank you! Your message has been sent.';
                        form.reset();
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                    } else {
                        document.getElementById('formStatus').textContent = 'Oops! There was a problem submitting your form.';
                    }
                })
                .catch(() => {
                    document.getElementById('formStatus').textContent = 'Oops! There was a problem submitting your form.';
                });
            }, 'image/png');
        };
    </script>
        <footer style="width:100%;max-width:100vw;text-align:center;padding:18px 0 12px 0;font-size:1rem;color:#888;background:#fafafa;position:relative;bottom:0;left:0;">
            &copy; Powered by Xpose Market
        </footer>
</body>
